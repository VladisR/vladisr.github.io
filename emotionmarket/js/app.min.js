"use strict";function setViewportProperty(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",e+"px")}window.addEventListener("resize",setViewportProperty),setViewportProperty(),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),$(function(){$.exists=function(e){return 0<$(e).length};/iPod|iPad|iPhone/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints;var n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Mobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints;$(window).on("resize",function(){/iPod|iPad|iPhone/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints,n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Mobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints,m(),l(),v(),g(),n?$("body").addClass("touchDevice").removeClass("descktop"):$("body").removeClass("touchDevice").addClass("descktop")}),n?$("body").addClass("touchDevice"):$("body").addClass("descktop");var t=$(".c-map"),s=function e(){"undefined"!=typeof ymaps?ymaps.ready(a):setTimeout(e,150)};function i(){var e;t[0].getBoundingClientRect().top<=(window.innerHeight||document.documentElement.clientHeight)&&((e=document.createElement("script")).setAttribute("src",defers.ymaps),e.setAttribute("async",!0),e.onload=function(){s()},document.head.appendChild(e),window.removeEventListener("scroll",i))}0<t.length&&(window.addEventListener("scroll",i),i());var o,a=function(){t.each(function(e,t){var i=$(t).data("coords").split(",").map(function(e){return Number.parseFloat(e.trim())}),i={center:i,iconCenter:i,zoom:$(t).data("zoom")||15,icon:{href:emotionMarket.assets_uri+"/img/map-location-icon.svg",size:[160,180],offset:[-70,-110]}},t=new ymaps.Map(t,{center:i.center,zoom:i.zoom,controls:["zoomControl"]},{}),i=new ymaps.Placemark([i.iconCenter[0],i.iconCenter[1]],{hintContent:"",balloonContent:""},{iconLayout:"default#image",iconImageHref:i.icon.href,iconImageSize:i.icon.size,iconImageOffset:i.icon.offset});t.geoObjects.add(i),t.controls.remove("zoomControl"),n&&t.behaviors.disable("scrollZoom")})},e=$(".js-list-slider"),r=[];function l(){$(".js-list-slider").length&&(1022<=$(window).width()?void 0===o&&e.each(function(e,t){3<$(this).find($(".swiper-slide")).length&&(o=new Swiper(t,{calculateHeight:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},spaceBetween:24,slidesPerView:3,slideActiveClass:"is-active",breakpoints:{1022:{slidesPerView:3,slidesPerGroup:2,spaceBetween:24}}}),$(this).find(".swiper-navigation").appendTo($(this).closest(".b-list2").find(".b-list2__head")),r.push(o))}):void 0!==o&&(e.each(function(){var e=$(this).closest(".b-list2").find(".swiper-navigation"),t=$(this).closest(".b-list2").find(".js-list-slider");e.appendTo(t)}),r.forEach(function(e){e.destroy()}),$(".js-list-slider .swiper-wrapper").removeAttr("style"),$(".js-list-slider .swiper-slide").removeAttr("style"),o=void 0))}l(),$(".js-ajax-load").on("click",function(e){e.preventDefault();var t=$(this),e=t.attr("href"),i=t.closest(".js-ajax"),n=i.find(".js-ajax-content");i.addClass("loading"),$.ajax({url:e,success:function(e){i.removeClass("loading"),n.html(e)}})});var c,d=".js-tabs";c=$(d),$.each(c,function(){var e=$(this),t=e.find(".js-tabs-title"),i=e.find(".js-tabs-body");t.on("click",function(e){e.preventDefault();e=$(this);e.hasClass("is-active")||(t.removeClass("is-active"),e.addClass("is-active"),i.removeClass("is-active").hide().filter('[data-index="'+e.data("index")+'"]').fadeIn(),s())})}),$(".js-categories li").each(function(){$(this).children("ul").length&&($(this).addClass("has-child"),$(this).find(">a").append('<span class="m-tgl"><span class="svg-icon svg-icon--arr-d2" aria-hidden="true"><svg class="svg-icon__link"><use xlink:href="#arr-d2"></use></svg></span></span>'))}),$(".js-anhor").on("click",function(e){e.preventDefault();e=$(this).data("anhor"),e=$(".js-anhor-container").filter('[data-anhor="'+e+'"]').offset().top;$("html, body").scrollTop(e-110)});var u=$("[data-remodal-id=cities]").remodal();$(".cities-list li a").on("click",function(){u.close()}),$('input[type="tel"]').inputmask("+7(999) 999-99-99"),$(".i-email").inputmask("email"),$(".js-img-container").each(function(e,t){new Swiper(t,{effect:"fade",loop:!0,noSwiping:!0,simulateTouch:!1,speed:1500,autoplay:{delay:5e3,disableOnInteraction:!1}})}),$("input, textarea").on("keyup",function(){$(this).val().length?$(this).closest(".item-control").addClass("filled"):$(this).closest(".item-control").removeClass("filled")}),$(".js-remove-val").on("click",function(){$(this).hide().closest(".item-control").find("input").val("")}),setTimeout(function(){$(".location-wrapper").addClass("is-active")},2e3),$(".location-wrapper .js-button").on("click",function(){$(".location-wrapper").removeClass("is-active")}),$(".main-menu li").each(function(){$(this).children("ul").length&&($(this).addClass("has-child"),$(this).find(">a").append('<span class="m-tgl">'))}),$(".has-child").on("click",function(e){$(window).width()<1022?(e.preventDefault(),$(this).toggleClass("is-opened").find(">ul").stop().slideToggle(200,function(){$(this).toggleClass("is-opened")})):n&&1022<=$(window).width()&&(e.preventDefault(),$(this).toggleClass("is-opened"))});var p=$('[data-id=""]');function m(){$("body").removeClass("overflow-hidden"),$(document.documentElement).removeClass("overflow-hidden")}$(".js-icn-target").on("click",function(){var e=$(this),t=e.data("target");(p=$('[data-id="'+t+'"]')).toggleClass("opened"),p.hasClass("opened")?(e.addClass("close"),/iPod|iPad|iPhone/i.test(navigator.userAgent)?$("body").addClass("overflow-hidden"):($("body").removeClass("overflow-hidden"),$(document.documentElement).addClass("overflow-hidden"))):(e.removeClass("close"),m())}),$(".js-bl-cl").on("click tap",function(e){$(e.target).closest(".js-bl-cn").length||($(".js-bl-cl").removeClass("opened"),m())}),$(document).on("keydown",function(e){27==e.keyCode&&($(".js-bl-cl").removeClass("opened"),m())}),$(document).on("click",".p-amount__button",function(){var e=$(this),t=e.closest(".p-amount").find("input").get(0);e.hasClass("minus")&&t.stepDown(),e.hasClass("plus")&&t.stepUp(),$(t).trigger("change"),setTimeout(function(){e.closest(".p-amount").find("input").val()<=1?e.closest(".p-amount").find(".p-amount__button.minus").addClass("disabled"):e.closest(".p-amount").find(".p-amount__button.minus").removeClass("disabled")})}),function(s){s.addEventListener("scroll",function e(){var t;s.removeEventListener("scroll",e),!1 in document.documentElement.style&&((t=document.createElement("script")).setAttribute("async",!0),t.setAttribute("src",site_defers.smoothscroll),document.body.appendChild(t))});var e=document.getElementById("back_to"),t={visible:"page-scroller--visible",inMemory:"page-scroller--in-memory"},i=0,n=100,o=!1;function a(e,t){function i(){s.pageYOffset.toFixed()===n&&(s.removeEventListener("scroll",i),t())}var n=e.toFixed();s.addEventListener("scroll",i),i(),s.scrollTo({top:e,behavior:"smooth"})}function r(){setTimeout(function(){s.pageYOffset>n?e.classList.add(t.visible):e.classList.contains(t.inMemory)||e.classList.remove(t.visible)},100),o||(i=0,e.classList.remove(t.inMemory)),o=!1}function l(){s.addEventListener("scroll",r)}l();e.addEventListener("click",function(){s.removeEventListener("scroll",r),0<s.pageYOffset&&0===i?(o=!0,i=s.pageYOffset,e.classList.add(t.inMemory),a(0,function(){l()})):(e.classList.remove(t.inMemory),a(i,function(){i=0,l()}))})}(window),$(document).on("click",".js-thumb",function(e){e.preventDefault();var e=$(this),t=e.data("url"),i=$(".product-card__image"),n=i.find(".js-image");e.parent().hasClass("is-active")||(n.animate({opacity:0},300,function(){i.addClass("loading"),n.attr("src",t).removeAttr("srcset"),i.imagesLoaded(function(){i.removeClass("loading"),n.animate({opacity:1})})}),$(".product-card__thumb").removeClass("is-active"),e.parent().addClass("is-active"))});var h,f=1;function v(){window.matchMedia("(min-width: 1022px)").matches&&1==f?($(".product-card__col").appendTo(".product-card"),f=2):window.matchMedia("(max-width: 1022px)").matches&&2==f&&($(".product-card__content").prepend($(".product-card__col")),f=1)}function g(){$(".js-product-thumbnails").length&&(1022<=$(window).width()&&5<$(".js-product-thumbnails .swiper-slide").length?void 0===h&&(h=new Swiper(".js-product-thumbnails",{calculateHeight:!0,loop:!1,preventClicks:!1,preventClicksPropagation:!1,keyboard:{enabled:!0},navigation:{nextEl:".js-product-thumbnails .swiper-button-next",prevEl:".js-product-thumbnails .swiper-button-prev"},spaceBetween:12,slidesPerView:4}),$(".js-product-thumbnails.swiper-initialized").parent().addClass("is-swiper-initialized"),$(".js-product-thumbnails .swiper-button").appendTo(".product-card__thumbnails-wrapper")):void 0!==h&&(h.destroy(),h=void 0,$(".js-product-thumbnails .swiper-wrapper").removeAttr("style"),$(".js-product-thumbnails .swiper-slide").removeAttr("style")))}v(),g();var w=$(".app"),b=$(".app-header__in"),y=($(".remodal-overlay"),0);function C(){y=window.innerWidth-w.outerWidth()}C(),$(window).on("resize",function(){C()}),y&&($(document).on("opening",".remodal",function(){w.css({margingRight:y}),window.matchMedia("(min-width: 992px)").matches&&b.css({marginRight:y})}),$(document).on("closed",".remodal",function(){w.css({margingRight:""}),window.matchMedia("(min-width: 992px)").matches&&b.css({marginRight:""})})),$(".remodal--search").closest(".remodal-wrapper").addClass("remodal-search");var j=document.getElementsByClassName("js-range");[].slice.call(j).forEach(function(e,t){var o=e.querySelector(".js-range-from"),a=e.querySelector(".js-range-to"),i=e.querySelector(".js-range-slider"),n=parseFloat(i.dataset.min),s=parseFloat(i.dataset.max),e=parseFloat(i.dataset.step);i.dataset.decimals;noUiSlider.create(i,{start:[0,s],connect:!0,step:e,range:{min:n,max:s}}),o.addEventListener("change",function(){i.noUiSlider.set([this.value.replace(/\s/g,""),null])}),a.addEventListener("change",function(){i.noUiSlider.set([null,this.value.replace(/\s/g,"")])}),i.noUiSlider.on("update",function(e,t){var i=Number(e[0]),e=Number(e[1]);o.value=i.toLocaleString(),a.value=e.toLocaleString();var n=i.toLocaleString(),s=e.toLocaleString();setTimeout(function(){o.setAttribute("size",n.length),a.setAttribute("size",s.length)})})}),$(".s-filter__range-values-input").on("click tap",function(){$(this).find("input").focus()}),$(".js-accordion-title").on("click",function(){$(this).toggleClass("is-active").closest(".js-accordion-item").toggleClass("is-active").find(".js-accordion-body").stop().slideToggle(250,function(){$(this).closest(".js-accordion-item").toggleClass("is-opened")})}),$(".s-search").on("click",function(){setTimeout(function(){$(".remodal .s-search input").focus()},300)}),$("select").select2({minimumResultsForSearch:-1}),$(".slider__item-image").each(function(e){var t=$(this);t.find("mask").attr("id","mask-"+e),t.find("g").attr("mask","url(#mask-"+e+")"),t.find("rect").attr("fill","url(#pattern-"+e+")"),t.find("pattern").attr("id","pattern-"+e),t.find("use").attr("xlink:href","#image-"+e),t.find("image").attr("id","image-"+e)});new Swiper(".js-slider",{effect:"fade",speed:1e3,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1}});$(".sticky-sidebar").length&&$(window).on("load",function(){new StickySidebar(".sticky-sidebar",{topSpacing:24,bottomSpacing:24,containerSelector:".content-wrapper",innerWrapperSelector:".sticky-sidebar",minWidth:1022})})});