"use strict";function setViewportProperty(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",e+"px")}window.addEventListener("resize",setViewportProperty),setViewportProperty(),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),$(function(){$.exists=function(e){return 0<$(e).length};/iPod|iPad|iPhone/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Mobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints;$(window).on("resize",function(){/iPod|iPad|iPhone/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Mobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints,T(),L(),_(),C(),t(),992<=$(window).width()&&($("html").removeClass("overflow-hidden"),$(".mobile-sidebar").removeClass("opened"))}),$(".js-accordion-title").on("click",function(e){$(this).closest(".js-accordion-parent").toggleClass("is-opened").find(".js-accordion-body").stop().slideToggle(250)});var i,e=$(".js-achievements"),s=[];function t(){$(".js-achievements").length&&(992<=$(window).width()?void 0===i&&e.each(function(e,t){4<$(this).find($(".swiper-slide")).length&&(i=new Swiper(t,{calculateHeight:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},spaceBetween:30,slidesPerView:4,slideActiveClass:"is-active",breakpoints:{992:{slidesPerView:4,slidesPerGroup:2,spaceBetween:30}}}),$(this).find(".swiper-controls").appendTo($(this).closest(".achievements")),s.push(i))}):void 0!==i&&(e.each(function(){var e=$(this).closest(".achievements").find(".swiper-controls"),t=$(this).closest(".achievements").find(".achievements__items-wrapper");e.appendTo(t)}),s.forEach(function(e){e.destroy()}),$(".js-achievements .swiper-wrapper").removeAttr("style"),$(".js-achievements .swiper-slide").removeAttr("style"),i=void 0))}t(),$(document).on("scroll load",function(){150<$(document).scrollTop()?$(".app-header").addClass("fixed"):$(".app-header").removeClass("fixed")}).trigger("scroll");function o(){"undefined"!=typeof ymaps?ymaps.ready(c):setTimeout(o,150)}var n=$(".c-map");function r(){var e;n[0].getBoundingClientRect().top<=(window.innerHeight||document.documentElement.clientHeight)&&((e=document.createElement("script")).setAttribute("src",defers.ymaps),e.setAttribute("async",!0),e.onload=function(){o()},document.head.appendChild(e),window.removeEventListener("scroll",r))}0<n.length&&(window.addEventListener("scroll",r),r());var a,l,d,c=function(){n.each(function(e,t){var i=$(t).data("coords").split(",").map(function(e){return Number.parseFloat(e.trim())}),i={center:i,iconCenter:i,zoom:$(t).data("zoom")||15,icon:{href:charkk.assets_uri+"/img/map-marker.svg",size:[60,80],offset:[-20,-65]}},t=new ymaps.Map(t,{center:i.center,zoom:i.zoom,controls:["zoomControl"]},{}),i=new ymaps.Placemark([i.iconCenter[0],i.iconCenter[1]],{hintContent:"",balloonContent:""},{iconLayout:"default#image",iconImageHref:i.icon.href,iconImageSize:i.icon.size,iconImageOffset:i.icon.offset});t.geoObjects.add(i),t.behaviors.disable("scrollZoom")})},p=($('input[type="tel"]').mask("+7(999) 999-99-99"),$('input[type="file"]').on("change",function(){$(this).closest(".i-file").find(".i-file__name").text($(this)[0].files[0].name)}),$(".js-hero-slider").length&&($('.js-hero-slide[data-slide-index="0"]').find(".fw-slider__item-title, .fw-slider__item-text, .fw-slider__item-stiker").addClass("is-active"),$(".js-lazy-img").each(function(){var e=$(this),t=e.data("src"),i=e.data("srcset");e.attr("src",t),e.attr("srcset",i)}),a=new Swiper(".js-hero-slider",{effect:"fade",loop:!1,speed:3e3,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},autoplay:{delay:7e3,disableOnInteraction:!1}}),$(".fw-slider__item").removeClass("first-slide"),a.on("slideChange",function(e){var t=e.realIndex;$(".fw-slider__item-title, .fw-slider__item-text, .fw-slider__item-stiker").removeClass("is-active"),$(".js-swiper-bullet").removeClass("is-active").eq(t).addClass("is-active"),setTimeout(function(){$('.js-hero-slide[data-slide-index="'+t+'"]').find(".fw-slider__item-title, .fw-slider__item-text, .fw-slider__item-stiker").addClass("is-active")},300)}),$(".js-swiper-bullet").on("click",function(e){e.preventDefault();e=$(this).data("index");a.slideTo(e)})),new Swiper(".js-gallery-h-thumbs",{spaceBetween:10,watchSlidesProgress:!1,breakpoints:{0:{slidesPerView:4,spaceBetween:10},575:{slidesPerView:6,spaceBetween:10},992:{slidesPerView:8,spaceBetween:10},1200:{slidesPerView:9,spaceBetween:20}}}));new Swiper(".js-gallery-h",{spaceBetween:10,lazy:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:p}});function v(){$("body").removeClass("overflow-hidden"),$(document.documentElement).removeClass("overflow-hidden")}$(".m-tgl").on("click",function(e){e.preventDefault(),($(this).closest(".main-menu.mobile").length?$(this).closest("li").toggleClass("is-opened").find(".m-dropdown"):$(this).closest("li").toggleClass("is-opened").find(">ul")).stop().slideToggle(200)}),$(".main-menu .menu-item-has-children").on({mouseenter:function(){$(".app-header").addClass("colored")},mouseleave:function(){$(".app-header").removeClass("colored")}}),$(".js-menu").on("click",function(){$(".mobile-sidebar").toggleClass("opened"),$(".mobile-sidebar").hasClass("opened")?/iPod|iPad|iPhone/i.test(navigator.userAgent)?$("body").addClass("overflow-hidden"):($("body").removeClass("overflow-hidden"),$(document.documentElement).addClass("overflow-hidden")):v()}),$(".mobile-sidebar").on("click tap",function(e){$(e.target).closest(".mobile-sidebar__container").length||($(".mobile-sidebar").removeClass("opened"),v())}),$(document).on("click",".js-thumb",function(e){e.preventDefault();var e=$(this),t=e.data("url"),i=e.closest(".object-h"),s=i.find(".js-image");e.parent().hasClass("is-active")||(s.animate({opacity:0},300,function(){i.addClass("loading"),s.attr("src",t).removeAttr("srcset").closest(i),i.imagesLoaded(function(){i.removeClass("loading"),s.animate({opacity:1})})}),i.find(".object-h__thumb").removeClass("is-active"),e.parent().addClass("is-active"))});var u=window,m=(u.addEventListener("scroll",function e(){var t;u.removeEventListener("scroll",e),!1 in document.documentElement.style&&((t=document.createElement("script")).setAttribute("async",!0),t.setAttribute("src",site_defers.smoothscroll),document.body.appendChild(t))}),document.getElementById("back_to")),w={visible:"page-scroller--visible",inMemory:"page-scroller--in-memory"},f=0,h=100,g=!1;function b(e,t){function i(){u.pageYOffset.toFixed()===s&&(u.removeEventListener("scroll",i),t())}var s=e.toFixed();u.addEventListener("scroll",i),i(),u.scrollTo({top:e,behavior:"smooth"})}function y(){setTimeout(function(){u.pageYOffset>h?m.classList.add(w.visible):m.classList.contains(w.inMemory)||m.classList.remove(w.visible)},100),g||(f=0,m.classList.remove(w.inMemory)),g=!1}function j(){u.addEventListener("scroll",y)}function _(){$(".js-partners").length&&(992<=$(window).width()?void 0===l&&(l=new Swiper(".js-partners",{calculateHeight:!0,loop:!0,navigation:{nextEl:".js-partners .swiper-button-next",prevEl:".js-partners .swiper-button-prev"},spaceBetween:30,slidesPerView:4,slideActiveClass:"is-active",lazy:!0,breakpoints:{992:{slidesPerView:5,slidesPerGroup:4,spaceBetween:30},1200:{slidesPerView:6,slidesPerGroup:5,spaceBetween:30}}}),$(".js-partners .swiper-controls").appendTo($(".js-partners").parent())):($(".partners__item").each(function(){var e=$(this),t=e.find("img").data("src");e.find("img").attr("src",t)}),void 0!==l&&(l.destroy(),l=void 0,$(".js-partners2").parent().find(".swiper-controls").appendTo($(".js-partners").parent().find(".partners__items-wrapper")),$(".js-partners .swiper-wrapper").removeAttr("style"),$(".js-partners .swiper-slide").removeAttr("style"))))}function C(){$(".js-partners2").length&&(992<=$(window).width()?void 0===d&&(d=new Swiper(".js-partners2",{calculateHeight:!0,loop:!0,navigation:{nextEl:".js-partners2 .swiper-button-next",prevEl:".js-partners2 .swiper-button-prev"},spaceBetween:30,slidesPerView:4,slideActiveClass:"is-active",lazy:!0,breakpoints:{992:{slidesPerView:4,slidesPerGroup:4,spaceBetween:30}}}),$(".js-partners2 .swiper-controls").appendTo($(".js-partners2").parent())):($(".partners__item").each(function(){var e=$(this),t=e.find("img").data("src");e.find("img").attr("src",t)}),void 0!==d&&(d.destroy(),d=void 0,$(".js-partners2").parent().find(".swiper-controls").appendTo($(".js-partners2").parent().find(".partners__items-wrapper")),$(".js-partners2 .swiper-wrapper").removeAttr("style"),$(".js-partners2 .swiper-slide").removeAttr("style"))))}j(),m.addEventListener("click",function(){u.removeEventListener("scroll",y),0<u.pageYOffset&&0===f?(g=!0,f=u.pageYOffset,m.classList.add(w.inMemory),b(0,function(){j()})):(m.classList.remove(w.inMemory),b(f,function(){f=0,j()}))}),_(),C();var P,x,E=$(".app"),k=$(".app-header"),A=($(".footer-cart"),$(".remodal-overlay"),0);function B(){A=window.innerWidth-E.outerWidth()}function T(){$(".js-reviews").length&&(992<=$(window).width()?void 0===P&&(P=new Swiper(".js-reviews",{calculateHeight:!0,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},spaceBetween:30,slidesPerView:2,slideActiveClass:"is-active",breakpoints:{992:{slidesPerView:2,slidesPerGroup:4,spaceBetween:30},1200:{slidesPerView:2,slidesPerGroup:2,spaceBetween:30}}}),$(".js-reviews .swiper-button").appendTo($(".js-reviews").parent())):void 0!==P&&(P.destroy(),P=void 0,$(".reviews .swiper-button").appendTo($(".reviews__items-wrapper")),$(".js-reviews .swiper-wrapper").removeAttr("style"),$(".js-reviews .swiper-slide").removeAttr("style")))}function L(){$(".js-services").length&&3<$(".js-services .swiper-slide").length&&(992<=$(window).width()?void 0===x&&(x=new Swiper(".js-services",{calculateHeight:!0,navigation:{nextEl:".js-services .swiper-button-next",prevEl:".js-services .swiper-button-prev"},scrollbar:{el:".swiper-scrollbar",hide:!1,draggable:!0},spaceBetween:27,slidesPerView:3,slideActiveClass:"is-active",breakpoints:{992:{slidesPerView:3,slidesPerGroup:2,spaceBetween:27}}}),$(".js-services .swiper-controls").appendTo($(".services.type-2")),$(".swiper-button-lock").parent().hide()):void 0!==x&&(x.destroy(),x=void 0,$(".services.type-2 .swiper-controls").appendTo($(".services__items-wrapper")),$(".js-services .swiper-wrapper").removeAttr("style"),$(".js-services .swiper-slide").removeAttr("style")))}function V(e){e=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);return!(!e||11!=e[7].length)&&e[7]}function M(){$(".video-popup").removeClass("opened"),setTimeout(function(){$(".video-popup__container").find("iframe, video").remove()},300)}B(),$(window).on("resize",function(){B()}),A&&($(document).on("opening",".remodal",function(){E.css({margingRight:A}),window.matchMedia("(min-width: 992px)").matches&&k.css({paddingRight:A})}),$(document).on("closed",".remodal",function(){E.css({margingRight:""}),window.matchMedia("(min-width: 992px)").matches&&k.css({paddingRight:""})})),T(),L(),$(".js-load-content").on("click",function(e){e.preventDefault(),$(this).addClass("loading")}),$(".js-scroll-to").on("click",function(){$("html,body").animate({scrollTop:$(".c-form").offset().top-60},500)}),$(".js-video").each(function(){var e="//img.youtube.com/vi/"+V($(this).data("video-url"))+"/hq720.jpg";$(this).find("img").length||$(this).find("> .video__image").css("background-image","url("+e+")")}),$(".js-video").length&&$("body").append('<div class="video-popup"><div class="video-popup__container"><div class="video-popup__close js-trigger-close"><span class="svg-icon svg-icon--close" aria-hidden="true"><svg class="svg-icon__link"><use xlink:href="#close"></use></svg></span></div><div class="popup-content"></div></div></div>'),$(".js-video").on("click",function(e){e.preventDefault();var e=$(this).data("video-url"),t=V(e);$(".video-popup").addClass("opened"),-1<e.indexOf("<iframe")?$(".video-popup__container .popup-content").append(e):-1<e.indexOf("youtube")||-1<e.indexOf("youtu")?$(".video-popup__container .popup-content").append('<iframe width="100%" height="100%" frameborder="0" src="https://www.youtube.com/embed/'+t+'?autoplay=1&rel=0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'):-1<e.indexOf("rutube")?(e=e.match(/^https.+?video\/(.+)/)[1],$(".video-popup__container .popup-content").append('<iframe width="100%" height="100%" frameborder="0" src="https://rutube.ru/play/embed/'+e+'?t=5" frameBorder="0" allow="autoplay; encrypted-media" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>')):$(".video-popup__container .popup-content").append('<video controls="controls" autoplay><source src="'+e+'" type="video/ogg"><source src="'+e+'" type="video/mp4"><source src="video/duel.webm" type="video/webm"></video>')}),$(".video-popup").on("click",function(e){$(e.target).closest(".video-popup__container").length||M()}),$(".js-trigger-close").on("click",function(){M()}),$(document).keydown(function(e){27===e.keyCode&&(M(),$(".l-sidebar").removeClass("opened"))})});